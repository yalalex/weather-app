(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,a){e.exports=a.p+"static/media/spinner.706c7930.gif"},37:function(e,t,a){e.exports=a(73)},65:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(32),l=a.n(r),i=a(9),s=a(10),o=Object(n.createContext)(),u=function(){var e=Object(n.useContext)(o),t=e.units,a=e.lang,r=e.switchLang,l=e.switchUnits;return c.a.createElement("nav",{className:"navbar bg-primary"},c.a.createElement("h1",null,c.a.createElement("i",{className:"fas fa-cloud-sun-rain"})," Weather app"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(i.b,{to:"/weather-app"},"en"===a?"Search":"\u041f\u043e\u0438\u0441\u043a")),c.a.createElement("li",null,c.a.createElement(i.b,{to:"/weather-app/about"},"en"===a?"About":"\u0418\u043d\u0444\u043e")),c.a.createElement("li",null,c.a.createElement("div",{className:"switch"},c.a.createElement("div",{className:"select"},"metric"===t?"\xb0C":"\xb0F",c.a.createElement("i",{className:"fa fa-angle-down"})),c.a.createElement("ul",{className:"select-drop"},c.a.createElement("li",{onClick:l},"metric"===t?"\xb0F":"\xb0C")))),c.a.createElement("li",null,c.a.createElement("div",{className:"switch"},c.a.createElement("div",{className:"select"},"en"===a?"EN":"RU",c.a.createElement("i",{className:"fa fa-angle-down"})),c.a.createElement("ul",{className:"select-drop"},c.a.createElement("li",{onClick:r},"en"===a?"RU":"EN"))))))},m=function(){var e=Object(n.useContext)(o).alert;return null!==e&&c.a.createElement("div",{className:"alert alert-".concat(e.type," text-center")},c.a.createElement("i",{className:"fas fa-info-circle"})," ",e.msg)},p=a(7),d=function(e){var t=e.history,a=Object(n.useContext)(o),r=a.searchPlaces,l=a.clearSearch,i=a.setAlert,s=a.lang,u=a.places,m=Object(n.useState)(""),d=Object(p.a)(m,2),E=d[0],f=d[1];Object(n.useEffect)(function(){t.push("/weather-app")},[u]);return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""===E?i("en"===s?"Please enter something":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c","dark"):(r(E),f(""))},className:"form"},c.a.createElement("input",{type:"text",name:"text",value:E,placeholder:"en"===s?"Enter City Name...":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435...",onChange:function(e){return f(e.target.value)}}),c.a.createElement("input",{type:"submit",value:"en"===s?"Search":"\u041f\u043e\u0438\u0441\u043a",className:"btn btn-dark btn-block"})),u.length>0&&"/weather-app"===window.location.pathname&&c.a.createElement("button",{className:"btn btn-grey btn-block my-1",onClick:l},"en"===s?"Clear":"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"))},E=a(12),f=a.n(E),h=function(e){var t=e.period,a=e.offset,n=e.lang,r=t.dt,l=t.main,i=t.weather,s=r+a;return c.a.createElement("div",{className:"weatheritem"},c.a.createElement("h3",null,c.a.createElement(f.a,{locale:n,unix:!0,format:"ddd LT"},s)),c.a.createElement("img",{alt:i[0].description,src:"https://openweathermap.org/img/wn/".concat(i[0].icon,"@2x.png"),style:{width:"100px"}}),c.a.createElement("h1",null,l.temp.toFixed(),"\xb0"))},y=function(e){var t=e.day,a=e.lang,r=e.units,l=t.ts,i=t.max_temp,s=t.min_temp,o=t.wind_spd,u=t.pop,m=t.pres,p=t.rh,d=t.weather;return c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"weatheritem"},c.a.createElement("h3",null,c.a.createElement(f.a,{locale:a,unix:!0,format:"dd Do"},l)),c.a.createElement("img",{alt:d.description,src:"https://www.weatherbit.io/static/img/icons/".concat(d.icon,".png"),style:{width:"70px"}}),c.a.createElement("h2",null,i.toFixed(),"\xb0/",s.toFixed(),"\xb0"),c.a.createElement("div",{className:"day"},c.a.createElement("div",null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("i",{className:"fas fa-umbrella"}),u,"%"),c.a.createElement("li",null,c.a.createElement("i",{className:"fas fa-water"}),p,"%"))),c.a.createElement("div",null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("i",{className:"fas fa-wind"}),o.toFixed(1),"en"===a?"metric"===r?"m/s":"mph":"metric"===r?"\u043c/c":"\u043c/\u0447"),c.a.createElement("li",null,c.a.createElement("i",{className:"fas fa-square"}),m.toFixed(),"en"===a?"mb":"\u043c\u0431"))))))},g=a(35),w=a.n(g),b=function(){return c.a.createElement(n.Fragment,null,c.a.createElement("img",{src:w.a,alt:"Loading...",style:{width:"64px",margin:"auto",display:"block"}}))},x=function(){var e=Object(n.useContext)(o),t=e.current,a=e.forecastToday,r=e.forecast15,l=e.getWeather,u=e.loading,m=e.units,d=e.lang,E=Object(n.useState)(""),g=Object(p.a)(E,2),w=g[0],x=g[1],v=Object(n.useState)(""),O=Object(p.a)(v,2),N=O[0],j=O[1];Object(n.useEffect)(function(){"en"===d?(x("15-day forecast"),j("15-day")):(x("\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u043d\u0430 15 \u0434\u043d\u0435\u0439"),j("15-day"))},[]),Object(n.useEffect)(function(){T()},[d,N]),Object(n.useEffect)(function(){l()},[m]);var T=function(){x("15-day"===N?"en"===d?"15-day forecast":"\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u043d\u0430 15 \u0434\u043d\u0435\u0439":"en"===d?"48-hr forecast":"\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u043d\u0430 48 \u0447\u0430\u0441\u043e\u0432")},C=t.name,A=t.timezone,_=t.dt,S=t.weather,k=t.sky,R=t.wind,F=t.temp,L=t.pressure,P=t.humidity,I=t.icon,H=60*(new Date).getTimezoneOffset()+A,W=_+H;return 0===a.length?null:u?c.a.createElement(b,null):c.a.createElement(i.a,null,c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"card grid-2"},c.a.createElement("div",{className:"card grid-2"},c.a.createElement("div",{className:"all-center"},c.a.createElement("img",{alt:k,src:"https://openweathermap.org/img/wn/".concat(I,"@2x.png"),style:{width:"150px"}})),c.a.createElement("div",{style:{margin:"auto 0"}},c.a.createElement("h1",null,F,"\xb0"),c.a.createElement("h3",null,r[0].max_temp.toFixed(),"\xb0/",r[0].min_temp.toFixed(),"\xb0"),c.a.createElement("h2",null,C),c.a.createElement("h4",null,c.a.createElement(f.a,{locale:d,unix:!0,format:"LT"},W)))),c.a.createElement("div",{style:{margin:"auto 0"}},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("h3",null,"en"===d?S:"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f:")),c.a.createElement("li",null,c.a.createElement("i",{className:"fas fa-water"})," ","en"===d?"Humidity: ":"\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c: ",P,"%"),c.a.createElement("li",null,c.a.createElement("i",{className:"fas fa-wind"})," ","en"===d?"Wind: ":"\u0412\u0435\u0442\u0435\u0440: ",R.toFixed(1)," ","en"===d?"metric"===m?"m/s":"mph":"metric"===m?"\u043c/c":"\u043c/\u0447"),c.a.createElement("li",null,c.a.createElement("i",{className:"fas fa-square"})," ","en"===d?"Pressure: ":"\u0414\u0430\u0432\u043b\u0435\u043d\u0438\u0435: ",L.toFixed()," ","en"===d?"mbar":"\u043c\u0431\u0430\u0440")),c.a.createElement(i.b,{to:"/weather-app/".concat(N,"/").concat(C),className:"btn btn-dark btn-sm my-1",onClick:function(){return function(e){j("15-day"===e?"current":"15-day")}(N)}},w))),c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/weather-app/current/:name",render:function(e){return c.a.createElement("div",{className:"listitems"},a.map(function(e){return c.a.createElement(h,{key:e.dt,period:e,offset:H,lang:d})}))}}),c.a.createElement(s.a,{exact:!0,path:"/weather-app/15-day/:name",render:function(e){return c.a.createElement("div",{className:"listitems"},r.map(function(e){return c.a.createElement(y,{key:e.ts,day:e,lang:d,units:m})}))}}))))},v=a(2),O=a.n(v),N=a(11),j=a(14),T=a.n(j),C=function(e){var t=e.place,a=Object(n.useContext)(o),r=a.units,l=a.selectPlace,s=a.fixZero,u=Object(n.useState)(""),m=Object(p.a)(u,2),d=m[0],E=m[1],f=Object(n.useState)(""),h=Object(p.a)(f,2),y=h[0],g=h[1],w=Object(n.useState)(""),b=Object(p.a)(w,2),x=b[0],v=b[1];Object(n.useEffect)(function(){j()},[r]);var j=function(){var e=Object(N.a)(O.a.mark(function e(){var a,n,c,l,i,o;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.latitude,n=t.longitude,e.next=3,T.a.get("https://api.openweathermap.org/data/2.5/weather?lat=".concat(a,"&lon=").concat(n,"&units=").concat(r,"&APPID=").concat("9dc5f93120e9ec0a6c67c21372c9f72b"));case 3:c=e.sent,l=c.data,i=l.main,o=l.weather,i.temp=s(i.temp),E(i.temp.toFixed()),g(o[0].description),v(o[0].icon);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),C=t.city,A=t.regionCode,_=t.country;return c.a.createElement(i.b,{to:"/weather-app/current/".concat(C),onClick:function(){return l(t)}},c.a.createElement("div",{className:"placeitem"},c.a.createElement("h1",null,d,"\xb0"),c.a.createElement("img",{alt:y,src:"https://openweathermap.org/img/wn/".concat(x,"@2x.png"),style:{width:"100px"}}),c.a.createElement("div",{className:"all-center"},c.a.createElement("h3",null,C,", ",A),c.a.createElement("h4",null,_))))},A=function(){var e=Object(n.useContext)(o),t=e.places;return e.loading?c.a.createElement(b,null):c.a.createElement("div",{className:"listitems"},t.map(function(e){return c.a.createElement(C,{key:e.id,place:e})}))},_=function(){return"en"===Object(n.useContext)(o).lang?c.a.createElement(n.Fragment,null,c.a.createElement("h2",null,"About this app"),c.a.createElement("p",null,"An application for finding weather in more than 134,000 cities in the world."),c.a.createElement("p",null,"Provides information on current weather, as well as a detailed forecast for the next 48 hours and a forecast for 15 days."),c.a.createElement("p",null,"Made by ",c.a.createElement("a",{href:"https://github.com/yalalex/"},"Alex Y"),".")):c.a.createElement(n.Fragment,null,c.a.createElement("h2",null,"\u041e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438"),c.a.createElement("p",null,"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u043f\u043e\u0433\u043e\u0434\u044b \u0432 \u0431\u043e\u043b\u0435\u0435 \u0447\u0435\u043c 134 000 \u0433\u043e\u0440\u043e\u0434\u0430\u0445 \u043c\u0438\u0440\u0430."),c.a.createElement("p",null,"\u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043f\u043e \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043f\u043e\u0433\u043e\u0434\u0435, \u0430 \u0442\u0430\u043a \u0436\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0433\u043d\u043e\u0437 \u043d\u0430 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 48 \u0447\u0430\u0441\u043e\u0432 \u0438 \u043f\u0440\u043e\u0433\u043d\u043e\u0437 \u043d\u0430 15 \u0434\u043d\u0435\u0439."),c.a.createElement("p",null,"\u0421\u0434\u0435\u043b\u0430\u043b ",c.a.createElement("a",{href:"https://github.com/yalalex/"},"Alex Y"),"."))},S=function(){return"en"===Object(n.useContext)(o).lang?c.a.createElement(n.Fragment,null,c.a.createElement("h2",null,"Not Found"),c.a.createElement("p",{className:"lead"},"The page you are looking for does not exist...")):c.a.createElement(n.Fragment,null,c.a.createElement("h2",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"),c.a.createElement("p",{className:"lead"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0432\u044b \u0438\u0449\u0435\u0442\u0435, \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442..."))},k=(a(65),a(36)),R=a.n(k),F=a(6),L=function(e,t){switch(t.type){case"SEARCH_PLACES":return Object(F.a)({},e,{places:t.payload,loading:!1});case"CLEAR_SEARCH":return Object(F.a)({},e,{places:[]});case"SELECT_PLACE":return Object(F.a)({},e,{place:t.payload});case"GET_CURRENT_WEATHER":return Object(F.a)({},e,{current:t.payload});case"GET_TODAY_WEATHER":return Object(F.a)({},e,{forecastToday:t.payload});case"GET_FORECAST":return Object(F.a)({},e,{forecast15:t.payload,loading:!1});case"SWITCH_LANG":return Object(F.a)({},e,{lang:t.payload});case"SWITCH_UNITS":return Object(F.a)({},e,{units:t.payload});case"SET_ALERT":return Object(F.a)({},e,{alert:t.payload});case"REMOVE_ALERT":return Object(F.a)({},e,{alert:null});case"SET_LOADING":return Object(F.a)({},e,{loading:!0});default:return e}},P=function(e){var t=Object(n.useReducer)(L,{units:"metric",lang:"en",loading:!1,alert:null,places:[],place:null,current:{},forecastToday:[],forecast15:[]}),a=Object(p.a)(t,2),r=a[0],l=a[1],i=function(){var e=Object(N.a)(O.a.mark(function e(t){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E(),R.a.get("https://wft-geo-db.p.rapidapi.com/v1/geo/cities").query({limit:"10"}).query({namePrefix:t}).query({sort:"-population"}).query({languageCode:r.lang}).set("x-rapidapi-host","wft-geo-db.p.rapidapi.com").set("x-rapidapi-key","d18fb22e26msh6173b50175c5c28p16d77ejsnc0cd70881577").set("Accept","application/json").then(function(e){if(0===e.body.data.length){var t="en"===r.lang?"No cities found. Check the spelling and try again":"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430";s(t,"dark")}else l({type:"SEARCH_PLACES",payload:e.body.data})}).catch(function(e){console.log(e)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),s=function(e,t){l({type:"SET_ALERT",payload:{msg:e,type:t}}),setTimeout(function(){return l({type:"REMOVE_ALERT"})},3e3)},u=function(){var e=Object(N.a)(O.a.mark(function e(t){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l({type:"SELECT_PLACE",payload:t});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),m=function(e){return"-0"===e.toFixed()&&(e=0),e},d=function(){var e=Object(N.a)(O.a.mark(function e(){var t,a,n,c,i,s,o,u,p,d,f,h,y,g,w,b,x,v,j,C,A,_,S,k;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E(),t=r.units,a=r.place,n=a.city,c=a.latitude,i=a.longitude,e.next=4,T.a.get("https://api.openweathermap.org/data/2.5/weather?lat=".concat(c,"&lon=").concat(i,"&units=").concat(t,"&APPID=").concat("9dc5f93120e9ec0a6c67c21372c9f72b"));case 4:return s=e.sent,o=s.data,u=o.timezone,p=o.dt,d=o.main,f=o.wind,h=o.weather,y=o.sys,g=d.temp,w=d.pressure,b=d.humidity,x=y.sunrise,v=y.sunset,(j={name:n,timezone:u,dt:p,temp:g,wind:f.speed,pressure:w,humidity:b,weather:h[0].main,sky:h[0].description,icon:h[0].icon,sunrise:x,sunset:v}).temp=m(j.temp),l({type:"GET_CURRENT_WEATHER",payload:j}),e.next=11,T.a.get("https://api.openweathermap.org/data/2.5/forecast?lat=".concat(c,"&lon=").concat(i,"&units=").concat(t,"&APPID=").concat("9dc5f93120e9ec0a6c67c21372c9f72b"));case 11:return C=e.sent,(A=C.data.list.slice(0,15)).map(function(){var e=Object(N.a)(O.a.mark(function e(t){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.main.temp=m(t.main.temp),x+86400<t.dt&&t.dt<v+86400?t.weather[0].icon=t.weather[0].icon.slice(0,-1)+"d":v<t.dt&&t.dt<x+86400?t.weather[0].icon=t.weather[0].icon.slice(0,-1)+"n":x<t.dt&&t.dt<v?t.weather[0].icon=t.weather[0].icon.slice(0,-1)+"d":v-86400<t.dt&&t.dt<x&&(t.weather[0].icon=t.weather[0].icon.slice(0,-1)+"n");case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),l({type:"GET_TODAY_WEATHER",payload:A}),_="metric"===t?"M":"I",e.next=18,T.a.get("https://api.weatherbit.io/v2.0/forecast/daily?lat=".concat(c,"&lon=").concat(i,"&units=").concat(_,"&key=").concat("b14e2486633e40cfa189b684c35373f7"));case 18:S=e.sent,(k=S.data.data.slice(1,16)).map(function(){var e=Object(N.a)(O.a.mark(function e(t){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.max_temp=m(t.max_temp),t.min_temp=m(t.min_temp);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),l({type:"GET_FORECAST",payload:k});case 22:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),E=function(){return l({type:"SET_LOADING"})};return c.a.createElement(o.Provider,{value:{units:r.units,lang:r.lang,loading:r.loading,alert:r.alert,places:r.places,place:r.place,current:r.current,forecastToday:r.forecastToday,forecast15:r.forecast15,searchPlaces:i,clearSearch:function(){return l({type:"CLEAR_SEARCH"})},setAlert:s,selectPlace:u,getWeather:d,switchUnits:function(){"metric"===r.units?l({type:"SWITCH_UNITS",payload:"imperial"}):l({type:"SWITCH_UNITS",payload:"metric"})},switchLang:function(){"en"===r.lang?l({type:"SWITCH_LANG",payload:"ru"}):l({type:"SWITCH_LANG",payload:"en"})},fixZero:m}},e.children)},I=function(){return c.a.createElement(P,null,c.a.createElement(i.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(u,null),c.a.createElement("div",{className:"container"},c.a.createElement(m,null),c.a.createElement(s.a,{path:"/weather-app",component:d}),c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/weather-app",component:A}),c.a.createElement(s.a,{exact:!0,path:"/weather-app/current/:name",component:x}),c.a.createElement(s.a,{exact:!0,path:"/weather-app/about",component:_}),c.a.createElement(s.a,{component:S}))))))};a(72);l.a.render(c.a.createElement(I,null),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.57dff142.chunk.js.map